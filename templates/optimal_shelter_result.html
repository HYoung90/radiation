<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>구호소 적합도 TOPSIS 평가 결과</title>
  <link rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
  <style>
    body {
      font-family: 'Segoe UI', 'Arial', sans-serif; /* 현대적인 폰트 */
      background-color: #f0f2f5; /* 부드러운 배경색 */
      margin: 0;
      padding: 25px; /* 전체 패딩 추가 */
      color: #333;
      line-height: 1.6;
    }

    .container {
      max-width: 1100px; /* 컨테이너 최대 너비 조정 */
      margin: 20px auto; /* 중앙 정렬 */
      background-color: #ffffff;
      padding: 35px; /* 패딩 증가 */
      border-radius: 12px; /* 모서리 둥글게 */
      box-shadow: 0 5px 18px rgba(0, 0, 0, 0.1); /* 그림자 더 강조 */
    }

    .d-flex.justify-content-between.align-items-center.mb-3 {
      margin-bottom: 30px !important; /* 부트스트랩 마진 오버라이드 */
      padding-bottom: 15px; /* 제목 아래 여백 */
      border-bottom: 1px solid #e0e0e0; /* 하단 경계선 추가 */
    }

    h1 {
      color: #2c3e50; /* 제목 색상 */
      font-size: 2.5em; /* h1 크기 */
      font-weight: 700; /* 굵기 강조 */
      margin-top: 0;
    }

    h3 {
      color: #34495e; /* h3 색상 */
      font-size: 1.8em; /* h3 크기 */
      font-weight: 600; /* 굵기 */
      margin-top: 40px; /* 위쪽 여백 */
      margin-bottom: 25px; /* 아래쪽 여백 */
      border-bottom: 1px solid #ececec; /* 하단 경계선 */
      padding-bottom: 10px;
    }

    /* 버튼 공통 스타일 */
    .btn {
      padding: 10px 20px;
      border-radius: 8px; /* 버튼 모서리 둥글게 */
      font-size: 0.95em;
      font-weight: 500;
      transition: all 0.3s ease; /* 모든 전환 효과 부드럽게 */
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08); /* 버튼 그림자 */
    }

    .btn:hover {
      transform: translateY(-2px); /* 호버 시 살짝 위로 */
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); /* 호버 시 그림자 강조 */
    }

    .btn-outline-secondary {
      color: #5a6268;
      border-color: #6c757d;
      background-color: #f8f9fa; /* 밝은 배경 */
    }
    .btn-outline-secondary:hover {
      color: #ffffff;
      background-color: #6c757d;
      border-color: #6c757d;
    }

    /* Folium 지도 스타일 */
    #map {
      height: 650px; /* 지도의 높이 설정 */
      width: 100%;
      border-radius: 10px; /* 지도 모서리 둥글게 */
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1); /* 지도 그림자 */
      margin-bottom: 30px; /* 지도 아래 여백 */
    }

    /* 테이블 헤더 짙은 배경 & 흰 글자 */
    table thead th {
      background-color: #34495e; /* 더 세련된 다크 블루-그레이 */
      color: #ffffff;
      text-align: center;
      vertical-align: middle;
      padding: 15px 10px; /* 패딩 조정 */
      border-bottom: 2px solid #2c3e50; /* 하단 보더 강조 */
    }
    /* 테이블 셀 가운데 정렬 */
    table tbody td {
      text-align: center;
      vertical-align: middle;
      padding: 12px 10px; /* 패딩 조정 */
    }
    /* 부트스트랩 스트라이프 행 색상 커스터마이즈 (홀수) */
    .table-striped tbody tr:nth-of-type(odd) {
      background-color: #f8f9fa; /* 더 밝은 배경 */
    }
    /* 마우스 오버시 강조 */
    .table-hover tbody tr:hover {
      background-color: #e6f7ff; /* 산뜻한 하늘색 */
      cursor: pointer;
    }
    /* 테이블 전체 테두리 및 그림자 */
    .table {
      border-radius: 10px;
      overflow: hidden; /* 둥근 모서리 적용 */
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.07);
      margin-bottom: 30px;
    }
  </style>
</head>
<body>
  <div class="container my-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1>구호소 적합도 TOPSIS 평가 결과</h1>
      <div>
        <button class="btn btn-outline-secondary mr-2" onclick="history.back()">← 뒤로가기</button>
        <button class="btn btn-outline-secondary" onclick="location.reload()">⟳ 새로고침</button>
      </div>
    </div>

    <div id="map">
      {{ map_html|safe }}
    </div>

    <h3 class="mt-4">TOPSIS 분석 결과 최적 구호소</h3>
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>읍·면·동 지역</th>
          <th>구호소 수용 인원</th>
          <th>TOPSIS 결과 점수</th>
        </tr>
      </thead>
      <tbody>
        {% for s in top5_shelters %}
        <tr>
          <td>{{ s.name }}</td>
          <td>{{ "{:,}".format(s.capacity) }}</td>
          <td>{{ '%.3f' % s.topsis_score }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

  </div>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</body>
</html>
